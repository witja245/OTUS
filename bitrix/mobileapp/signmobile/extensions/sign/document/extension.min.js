jn.define("sign/document",((t,e,s)=>{const{Card:o}=t("ui-system/layout/card");const{ButtonSize:i,ButtonDesign:n,Button:a}=t("ui-system/form/buttons/button");const{Indent:r,Color:l}=t("tokens");const{Loc:d}=t("loc");const{ResponseMobile:c}=t("sign/dialog/banners/responsemobile");const{RefusedJustNow:u}=t("sign/dialog/banners/refusedjustnow");const{NotifyManager:I}=t("notify-manager");const{showConfirm:N}=t("sign/dialog/banners/template");const{rejectConfirmation:_}=t("sign/connector");const g=Application.getPlatform()==="ios";const h="https://www.gosuslugi.ru/select-app-goskey";class m extends LayoutComponent{constructor(t){super(t);const{url:e,widget:s,memberId:o,hideButtons:i,title:n,isGoskey:a}=t;this.layout=s;this.url=e;this.memberId=o;this.hideButtons=i;this.isGoskey=a;this.title=n}clearHeader(){this.layout.setTitle({text:""});this.layout.setRightButtons([]);this.layout.setLeftButtons([])}render(){return View({style:{backgroundColor:l.bgPrimary.toHex(),flex:1}},WebView({style:{flex:1},scrollDisabled:true,zoomEnabled:true,data:{url:this.url}}),View({style:{paddingBottom:g?device.screen.safeArea.bottom:!this.hideButtons?r.L.toNumber():0}},!this.hideButtons&&o({},a({text:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_BUTTON_TITLE"),size:i.XL,design:n.FILLED,disabled:false,badge:false,stretched:true,onClick:()=>{if(this.isGoskey){if(Application.canOpenUrl(h)){Application.openUrl(h)}return}this.clearHeader();this.layout.showComponent(new c({documentTitle:this.title,memberId:this.memberId,layoutWidget:this.layout}))},style:{marginBottom:r.L.toNumber()}}),a({text:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_REJECT_TITLE"),size:i.XL,design:n.PLAN_ACCENT,disabled:false,badge:false,stretched:true,onClick:()=>{if(this.isGoskey){if(Application.canOpenUrl(h)){Application.openUrl(h)}return}N({title:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_TITLE"),description:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_DESCRIPTION"),confirmTitle:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_REJECT_BUTTON_TITLE"),cancelTitle:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_CANCEL_BUTTON_TITLE"),onConfirm:()=>{I.showLoadingIndicator();_(this.memberId).then((({data:t})=>{I.hideLoadingIndicatorWithoutFallback();this.clearHeader();this.layout.showComponent(new u({documentTitle:this.title,memberId:this.memberId,layoutWidget:this.layout}))})).catch((()=>{I.showErrors([{message:d.getMessage("SIGN_MOBILE_DOCUMENT_UNKNOWN_ERROR_TEXT")}])}))}})}}))))}}s.exports={SignDocument:m}}));
//# sourceMappingURL=extension.map.js