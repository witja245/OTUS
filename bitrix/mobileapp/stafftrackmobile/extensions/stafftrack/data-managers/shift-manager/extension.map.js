{"version":3,"file":"extension.map.js","names":["jn","define","require","exports","module","Type","EventEmitter","ShiftAjax","DepartmentStatisticsAjax","OptionManager","SettingsManager","DateHelper","ShiftModel","PullCommandEnum","ShiftManager","constructor","super","this","setUid","mainData","usersShifts","departments","departmentMonths","pullSubscribe","BX","PULL","subscribe","moduleId","callback","data","command","prop","getString","params","getObject","SHIFT_ADD","getValue","addShiftToCache","shift","departmentIds","SHIFT_UPDATE","updateShiftCache","SHIFT_DELETE","deleteShiftFromCache","getId","emit","async","date","loadMain","setOptions","options","setEnabledBySettings","enabledBySettings","loadMainPromise","getCurrentDayCode","shiftDto","currentShift","add","map","department","id","getUserId","userInfo","getCachedShiftById","userId","monthCode","getMonthCode","getShiftDate","push","departmentId","shifts","statistics","find","statisticsItem","checkinCount","update","it","shiftId","result","delete","shiftToDelete","userShifts","filter","Object","keys","departmentShifts","hasUserShiftsForMonth","isNil","getCachedUserShiftsForMonth","loadUserShiftsForMonth","getDateFromMonthCode","start","Date","getFullYear","getMonth","end","usersShiftPromises","list","DATE_FROM","getDayCode","DATE_TO","USER_ID","shiftList","rawShift","hasDepartmentMonthStatistics","hasDepartmentStatistics","loadDepartmentMonthStatistics","departmentMonthsPromises","getForMonth","parseInt","loadDepartmentStatistics","departmentPromises","get","users","user"],"sources":["extension.js"],"mappings":"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"}